-- start_ignore
select sess_id from pg_stat_activity where pg_backend_pid()=pid;
 sess_id 
---------
      26
(1 row)

\gset
select pg_sleep(30);
 pg_sleep 
----------
 
(1 row)

-- end_ignore
\c gpperfmon
select pg_sleep(100);
 pg_sleep 
----------
 
(1 row)

analyze system_history;
analyze database_history;
analyze diskspace_history;
analyze queries_history;
select count(*) from system_now;
 count 
-------
     1
(1 row)

select count(*) from database_now;
 count 
-------
     1
(1 row)

select count(*) from diskspace_now;
 count 
-------
     1
(1 row)

select count(*) > 0 from system_history;
 ?column? 
----------
 t
(1 row)

select count(*) > 0 from database_history;
 ?column? 
----------
 t
(1 row)

select count(*) > 0 from diskspace_history;
 ?column? 
----------
 t
(1 row)

select status, query_text from queries_history where ssid = :sess_id;
 status |      query_text      
--------+----------------------
 done   | select pg_sleep(30);
(1 row)

